---
date: "2024-04-15T22:56:22+03:00"
description: |
  Библиотеки для работы с OpenAPI
id: z0rakhj0ipb0fb7y5otb384
publish: true
title: Swagger
updated: 1714121309350
---
## Документирование API с помощью Swagger/OpenAPI спецификации

Зачем?

- описание доступных методов для пользователей
- уменьшение порога вхождения в проект для разработчиков
- генерация кода на основе спецификации

## Подходы

1. комментарии в кодовой базе, на основе которых генерируется спецификация

   - [p] спецификация всегда синхронизированна с кодом, она из него генерируется
   - [c] комментарии и аннотации выглядят громоздко, мешают читать код

2. ведение спецификации отдельно от кода

   - [p] можно генерировать код на основании спецификации
   - [c] можно забыть исправить спецификацию после изменения кода

3. генерация документации с помощью рефлексии в коде

   - [c] документация буквально часть кода

Тема холиварная.

## Библиотеки в Go

1. <https://github.com/swaggo/swag>

   данная утилита позволяет генерировать схемы на основе комментариев в коде. по ощущениям проще некуда.

   нашел пару проблем:

   - ломатеся godoc при аннотировании
   - для generic методов нельзя написать аннотацию. типа, если хэндлер возвращает разные струкруры, то возможно задать только один возвращаемый тип.

2. <https://github.com/go-swagger/go-swagger>

   библиотека позволяет генерировать как спецификации на основе комментариев в коде, так и код на основе спецификации - клиент и сервер.

   на мой взгляд комментарии выглядят менее громоздко по сравнению с swaggo

3. <https://github.com/swaggest/openapi-go>

   вшивается прямо в код, чтобы на основе рефлексии генерировать спецификации.

   по сравнению с другими приведенными библиотеками поддерживает 3 версию openapi.

   не понравилось то, что нужно в рабочий код вшивать библиотеку для документации.. как-то это
