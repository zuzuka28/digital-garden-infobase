---
date: "2024-04-15T22:56:22+03:00"
description: |
  Библиотеки для работы с OpenAPI
id: huu7aklh6ny8ivm9jzb3d7n
publish: true
title: Swagger
updated: 1715766354347
---

Библиотеки для [[organize.resource.it.swagger|swagger]]

## <https://github.com/swaggo/swag>

данная утилита позволяет генерировать схемы на основе комментариев в коде. 
по ощущениям проще некуда.

нашел пару проблем:

- ломается godoc при аннотировании
- для generic методов нельзя написать аннотацию. типа, если хэндлер возвращает разные струкруры, то возможно задать только один возвращаемый тип.

на мой взгляд, комментарии сильно мешают чтению кода, поэтому для собственного удобства я делаю отдельную обертку для функций, требующих аннотации, над которой и пишу комментарии.

```go
// Some 
// Long
// Spec
func specHandler(w http.ResponseWriter, r *http.Request) {
   realLogicHandler(w, r)
}
```

в общем, не самый надежный способ документирования, но самый простой

## <https://github.com/go-swagger/go-swagger>

библиотека позволяет генерировать как спецификации на основе комментариев в коде, так и код на основе спецификации - и клиент и сервер.

при помощи кодогенерации можно достичь согласованности документации и кода, это круто

мне лично пока не очень зашел подход: если есть какие-то специфические фичи, которые нужно обрабатывать и сгенерированный код этого не поддерживает, то придется сильно изощериться, чтобы добавить необходимый функционал.

меня несколько раздражает писать по тыще мапперов между сгенерированным кодом и своим - особенно досадная ситуация, когда один и тот же метод использует схожий набор параметров: приходится дублировать одну и ту же логику маппера многократно без возможности переиспользования.

## <https://github.com/swaggest/openapi-go>

вшивается прямо в код, чтобы на основе рефлексии генерировать спецификации.

по сравнению с другими приведенными библиотеками поддерживает 3 версию openapi.

не понравилось то, что нужно в рабочий код вшивать библиотеку для документации..

пока не удосужился попробовать эту библиотеку
